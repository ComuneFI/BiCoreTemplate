(self.webpackChunk=self.webpackChunk||[]).push([[884],{8869:(e,t,a)=>{"use strict";a(9826),a(2772),a(4678),a(1058),a(3210),a(1249),a(489),a(8304);var o=a(7036),n=a(9755);const i=function(){console.log("Estrazione dati sottotabella tramite class Tabella estesa");var e,t=Routing.generate("Ordine_indexdettaglio"),a={prefiltri:[{nomecampo:"Ordine.Cliente.id",operatore:"=",valore:e=n("#tabellaOrdineCliente").data("clienteid")}],titolotabella:"Ordini del cliente "+n("#tabellaOrdineCliente").data("clientenominativo"),modellocolonne:[{nomecampo:"Ordine.Cliente",escluso:!0}],colonneordinamento:{"Ordine.data":"DESC","Ordine.quantita":"DESC"},parametriform:{cliente_id:e},multiselezione:!0};n.ajax({type:"POST",url:t,data:{parametripassati:JSON.stringify(a)}}).done((function(e){n("#tabellaOrdineCliente").html(e).promise().done((function(){new o.Z("Ordine").caricatabella()}))})),t=Routing.generate("Magazzino_indexdettaglio"),a={prefiltri:[{nomecampo:"Magazzino.Ordine.Cliente.id",operatore:"=",valore:e=n("#tabellaOrdineCliente").data("clienteid")}],modellocolonne:[{nomecampo:"Magazzino.giornodellasettimana",escluso:!1,decodifiche:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"]}],titolotabella:"Roba in magazzino del cliente "+n("#tabellaOrdineCliente").data("clientenominativo")},n.ajax({type:"POST",url:t,data:{parametripassati:JSON.stringify(a)}}).done((function(e){n("#tabellaMagazzinoCliente").html(e).promise().done((function(){new o.Z("Magazzino").caricatabella()}))}))};var l=a(2929),r=a(2642),c=a(2381),s=a(1369),d=a.n(s),u=a(6455),p=a.n(u),m=a(9755);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t,a){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(o){var n=Object.getOwnPropertyDescriptor(o,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,o=O(e);if(t){var n=O(this).constructor;a=Reflect.construct(o,arguments,n)}else a=o.apply(this,arguments);return k(this,a)}}function k(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(c,e);var t,a,o,n=y(c);function c(){return b(this,c),n.apply(this,arguments)}return t=c,(a=[{key:"caricatabella",value:function(){console.log("caricatabella TabellaEstesa"),g(O(c.prototype),"caricatabella",this).call(this)}},{key:"aggiungirecord",value:function(e){console.log("addrow TabellaEstesa"),g(O(c.prototype),"aggiungirecord",this).call(this,e)}},{key:"modificarecord",value:function(e,t){console.log("editrow TabellaEstesa"),g(O(c.prototype),"modificarecord",this).call(this,e,i)}},{key:"cancellarecord",value:function(e,t){console.log("deleterow TabellaEstesa"),g(O(c.prototype),"cancellarecord",this).call(this,e,(function(){console.log("Cancellato record "+e)}))}},{key:"aggiornaselezionati",value:function(e){var t=this;if(!0!==JSON.parse(l.Z.getTabellaParameter(this.parametri.permessi)).update)return r.Z.show("Non si dispongono dei diritti per eliminare questo elemento","warning","it-error"),!1;m("#table"+this.nometabella).attr("data-tabletoken");var a=m("#table"+t.nometabella+" > tbody > tr .biselecttablerow").map((function(){if(!0===m(this).prop("checked"))return parseInt(this.dataset.bitableid)})).get();if(a.length>0){var o=Routing.generate("Cliente_preparazioneaggiornamentomultiplo");m.ajax({type:"GET",url:o,context:"body",dataType:"html",success:function(o){var n=document.createElement("html");n.innerHTML=o;var i=m(n).find("#selectmultipladiv");d().dialog({title:"Seleziona il campo",closeButton:!1,message:i,size:"large",buttons:{cancel:{label:"Annulla",className:"btn-danger",callback:function(){console.log("Custom cancel clicked"),e()}},ok:{label:"Conferma",className:"btn-info",callback:function(){var o=Routing.generate("Cliente_aggiornamentomultiplo"),n=m("#selectmultipla").val(),i=m("#selectmultiplainputtext").val();m.ajax({type:"POST",url:o,data:{camposelezionato:n,valoreselezionato:i,idsselezionati:a},context:"body",dataType:"json",success:function(e){e.errcode<0?p().fire("Oops...",e.message,"error"):(t.caricatabella(),p().fire(e.message))}}),e()}}}}),m(".bootstrap-select-wrapper select").selectpicker("refresh")}})}}}])&&h(t.prototype,a),o&&h(t,o),c}(o.Z);var C=a(9755);document.addEventListener("DOMContentLoaded",(function(e){e.preventDefault();var t=w.getMainTabella();new w(t).caricatabella()})),C(document).on("change","#selectmultipla",(function(e){var t=C(this).find(":selected").data("datatype");switch(C("#selectmultiplainputtext").remove(),t){case"integer":C("<input/>").attr({type:"text",id:"selectmultiplainputtext",name:"selectmultiplainputtext"}).appendTo("#selectmultiplainputdiv");break;case"boolean":C("<input/>").attr({type:"checkbox",class:"form-check",id:"selectmultiplainputtext",name:"selectmultiplainputtext"}).appendTo("#selectmultiplainputdiv");break;case"date":C("<input/>").attr({type:"text",class:"bidatepicker",id:"selectmultiplainputtext",name:"selectmultiplainputtext"}).appendTo("#selectmultiplainputdiv");break;case"datetime":C("<input/>").attr({type:"text",class:"bidatetimepicker",id:"selectmultiplainputtext",name:"selectmultiplainputtext"}).appendTo("#selectmultiplainputdiv")}C(".bidatepicker").datetimepicker({locale:"it",format:"L"}),C(".bidatetimepicker").datetimepicker({locale:"it"})})),C(document).on("click",".filterable .btn-filter",(function(e){var t=C(this).parents(".filterable").find(".filters input.colonnatabellafiltro");!0===t.prop("readonly")?(t.prop("readonly",!1),C.each(t,(function(e,t){C(this).attr("placeholder",C(this).attr("placeholder").trim()),C(this).closest("th").removeClass("sorting sorting_asc sorting_desc")})),t.first().focus()):t.val("").prop("readonly",!0)})),C(document).on("keypress",".filterable .filters input",(function(e){var t=e.keyCode||e.which;if("9"!=t&&"13"==t){var a=this.dataset.nomecontroller,o=new w(a),n=new Array;C(".colonnatabellafiltro").each((function(e){if(""!=C(this).val()){var t=C(this).data("tipocampo"),a=C(this).val();if(void 0!==C(this).data("decodifiche")&&null!==C(this).data("decodifiche")){var i=C(this).data("decodifiche"),l=Array();C.each(i,(function(e,t){-1!==t.toLowerCase().indexOf(a.toLowerCase())&&l.push(e)}));var r={nomecampo:C(this).data("nomecampo"),operatore:"IN",valore:l}}else switch(t){case"string":case"text":var c=encodeURIComponent(a);r={nomecampo:C(this).data("nomecampo"),operatore:"CONTAINS",valore:c};break;case"integer":r={nomecampo:C(this).data("nomecampo"),operatore:"=",valore:parseInt(a)};break;case"decimal":r={nomecampo:C(this).data("nomecampo"),operatore:"=",valore:parseFloat(a)};break;case"boolean":var s=a.toUpperCase(),d=a;switch(s){case"SI":d=!0;break;case"NO":d=!1}r={nomecampo:C(this).data("nomecampo"),operatore:"=",valore:d};break;case"date":var u=o.getDateTimeTabella(a+" 00:00:00");r={nomecampo:C(this).data("nomecampo"),operatore:"=",valore:{date:u}};break;case"datetime":u=o.getDateTimeTabella(a),r={nomecampo:C(this).data("nomecampo"),operatore:"=",valore:{date:u}};break;default:r={nomecampo:C(this).data("nomecampo"),operatore:"=",valore:a}}n.push(r)}})),o.setDataParameterTabella("filtri",JSON.stringify(n)),o.setDataParameterTabella("paginacorrente","1"),o.caricatabella()}})),C(document).on("click","th.sorting .colonnatabellafiltro[readonly], th.sorting_asc .colonnatabellafiltro[readonly], th.sorting_desc .colonnatabellafiltro[readonly]",(function(e){var t=this.dataset.nomecampo,a=this.dataset.nomecontroller,o="ASC",n=new w(a),i=n.getParametriTabellaDataset(),r=JSON.parse(l.Z.getTabellaParameter(i.colonneordinamento));void 0!==r[t]&&(o="ASC"===r[t]?"DESC":"ASC"),n.setDataParameterTabella("colonneordinamento",'{"'+t+'": "'+o+'" }'),n.caricatabella()})),C(document).ready((function(){C(document).on("click",".tabellarefresh",(function(e){e.preventDefault();var t=this.dataset.nomecontroller;new w(t).caricatabella()})),C(document).on("click",".tabellamodificamultipla",(function(e){e.preventDefault();var t=this.dataset.nomecontroller;new w(t).aggiornaselezionati((function(){console.log("Modifica records tabella estesa")}))})),C(document).on("click",".tabelladel",(function(e){e.preventDefault();var t=this.dataset.nomecontroller;new w(t).eliminaselezionati((function(){console.log("Cancellati records tabella estesa")}))})),C(document).on("click",".paginascelta",(function(e){e.preventDefault();var t=this.dataset.nomecontroller,a=new w(t);a.getParametriTabellaDataset().paginacorrente=l.Z.setTabellaParameter(this.dataset.paginascelta),a.caricatabella()})),C(document).on("click",".tabellaadd",(function(e){e.preventDefault();var t=this.dataset.nomecontroller;new w(t).aggiungirecord()})),C(document).on("click",".tabelladownload",(function(e){e.preventDefault();var t=this.dataset.nomecontroller;new w(t).download()})),C(document).on("click",".birimuovifiltri",(function(e){var t=this.dataset.nomecontroller,a=new w(t);a.setDataParameterTabella("filtri",JSON.stringify([])),a.caricatabella()})),C(document).on("click",".bibottonieditinline",(function(e){var t=this.closest("tr").dataset.bitableid,a=C(this).closest("tr").closest("table").attr("id"),o=this.closest("tr").closest("table").dataset.nomecontroller,n=this.dataset.azione,i=C("#"+a+" > tbody > tr.inputeditinline[data-bitableid='"+t+"'] :input");if("conferma"===n){var l=Array();i.each((function(e,t){var a,o=t.closest("td").dataset.nomecampo,n=t.closest("td").dataset.tipocampo,i=C(t).attr("disabled");a="boolean"===n?C(t).is(":checked"):C(t).val(),o&&void 0===i&&l.push({fieldname:o,fieldvalue:a,fieldtype:n})}));var r=this.closest("tr").dataset.token,s=Routing.generate(o+"_aggiorna",{id:t,token:r});C.ajax({url:s,type:"POST",data:{values:l},async:!0,error:function(e,t,a){return d().alert({size:"large",closeButton:!1,title:'<div class="alert alert-warning" role="alert">Si è verificato un errore</div>',message:c.Z.showErrori(e.responseText)}),!1},beforeSend:function(e){},success:function(e){var a=new w(o);a.reseteditinline(i),C("#table"+o+" > tbody > tr > td.colonnazionitabella a.bibottonieditinline[data-biid='"+t+"']").addClass("sr-only"),C("#table"+o+" > tbody > tr > td.colonnazionitabella a.bibottonimodificatabella"+o+"[data-biid='"+t+"']").removeClass("sr-only"),a.caricatabella()}})}"annulla"===n&&(new w(o).reseteditinline(i),C("#table"+o+" > tbody > tr > td.colonnazionitabella a.bibottonieditinline[data-biid='"+t+"']").addClass("sr-only"),C("#table"+o+" > tbody > tr > td.colonnazionitabella a.bibottonimodificatabella"+o+"[data-biid='"+t+"']").removeClass("sr-only"))}))}));a(7481),a(7634);a(8878)},489:(e,t,a)=>{var o=a(2109),n=a(7293),i=a(7908),l=a(9518),r=a(8544);o({target:"Object",stat:!0,forced:n((function(){l(1)})),sham:!r},{getPrototypeOf:function(e){return l(i(e))}})},8304:(e,t,a)=>{a(2109)({target:"Object",stat:!0},{setPrototypeOf:a(7674)})}},0,[[8869,666,755,981,994,93,583]]]);